<style type='text/css'>
  .content_tb_header1_wrapper {
     position: relative;
     float: left;
     left: 0px;
     width: 100%;
     margin-bottom: 5px;
     /*background-color: #cccccc;*/
  }
  .content_tb_header1_content{
     position: relative;
     float: right;
     right: 5px;
     width: 100%;
     height: 50px;
     /*background-color: #828282;*/
  }
  .content_tb_header2_wrapper {
     position: relative;
     float: left;
     left: 0px;
     width: 100%;
     margin-bottom: 5px;
     /*background-color: #cccccc;*/
  }
  .content_tb_header2_content {
     position: relative;
     float: left;
     right: 5px;
     width: 100%;
     height: 0px;
     padding-left: 30px;
     /*background-color: #828282;*/
  }
  .content_tb_content_wrapper {
     position: relative;
     float: left;
     left: 0px;
     width: 100%;
     margin-bottom: 5px;
     /*background-color: #cccccc*/
  }
  .content_tb_content_content {
     position: relative;
     float: left;
     right: 5px;
     width: 100%;
     height: 150px;
     /*background-color: #828282*/
  }

  .content_tb_header1_left1 {
     position: relative;
     float: left;
     left: 5px;
     width: 50%;
     /*background-color: #128281;*/
  }
  .content_tb_header1_right {
     position: relative;
     float: right;
     right: 5px;
     width: 50%;
     /*background-color: #128281;*/
     height: 30px;
     padding-top: 15px;
     text-align: right;
  }

  .text_box {
    height: 450px;
  }

  .friends {
    padding-left: 30px;
    height: 150px;
    width: 380px;
    overflow: auto;
    border: inset 3px;
    background: white;
    color: gray;
  }
</style>

<script>
  if( document.addEventListener )
    document.addEventListener( 'DOMContentLoaded', cmxform, true);

  function cmxform(){
    // Hide forms
    //$( 'form.cmxform' ).hide().end();

    // Processing
    $( 'form.cmxform' ).find( 'li/label' ).not( '.nocmx' ).each( function( i ){
      var labelContent = this.innerHTML;
      var labelWidth = document.defaultView.getComputedStyle( this, '' ).getPropertyValue( 'width' );
      var labelSpan = document.createElement( 'span' );
          labelSpan.style.display = 'block';
          labelSpan.style.width = labelWidth;
          labelSpan.innerHTML = labelContent;
      this.style.display = '-moz-inline-box';
      this.innerHTML = null;
      this.appendChild( labelSpan );
    } ).end();

  // Show forms
  $( 'form.cmxform' ).show().end();

  $("#user_name").autocomplete({
    source: "/users/publicusers",
    minLength: 2,
    select: function(event, ui) {
      $("#privacy_friend_user2_id").val(ui.item.id);
      $("#button_save").focus();
    }
  });

}
</script>

<script type="text/javascript">
    $(function() {
        $(".demo button:first").button({
            icons: {
                primary: 'ui-icon-arrowreturnthick-1-w'
            },
            text: true
        });
        
        $("#button_save").button({
            icons: {
                primary: 'ui-icon-disk'
            },
            text: true
        });
    });

    $("document").ready(function(){
      $("#button_save").click(
        function (event) {
            $("#form_main").submit();
        }
      );
    });
</script>

          <div class="content_tb_header1_wrapper">
             <div class="content_tb_header1_content">
                <div class="content_tb_header1_left1">
                    <h1>Alta de Nuevo Campo</h1>
                </div> <!-- content_tb_header1_left1 -->
                <div class="content_tb_header1_right demo">
                  <button onclick="document.location.href='<%= user_path(@user) %>'">Cancelar</button>
                </div> <!-- content_tb_header1_right demo -->
             </div> <!-- content_tb_header1_content -->
          </div> <!-- content_tb_header1_wrapper -->

          <div class="content_tb_header2_wrapper">
             <div class="content_tb_header2_content">
             </div> <!-- content_tb_header2_content -->
          </div> <!-- content_tb_header2_wrapper -->

          <div class="content_tb_content_wrapper">
               <div class="content_tb_content_content cmxform demo">

                    <fieldset>
                      <legend>Buscando amigos</legend>

                      <% form_for(@privacy_friend, :html => { :id =>'form_main', :class => "cmxform"}) do |f| %>
                      <%= f.error_messages %>

                        <p>
                          <b>Usuario:</b>
                          <%=h @user.name -%>
                          <%= f.hidden_field :user1_id, :value => @user.id %>
                        </p>
                        <p>
                        <div id="new_friend">
                            <b>Nombre Amigo:</b>
                            <%= f.text_field :user2_id, :style => 'display:none;' %>
                            <input id="user_name" name="user_name" type="text" size="40" />
                            <button id="button_save">Grabar</button>
                          </div>
                        </p>
                      <% end %>
                        
                        <p>&nbsp;</p>
                        <p>
                          <h3>Amigos dados de alta que podrá utilizar en sus partidos:</h3>
                        </p>
                      
                        
                      <div class="friends">
                        <ol>
                          <% @friendsofmine.each do |fr| %>
                          <li>
                            <ul class="ul-form" style="vertical-align:middle; height: 20px;border-bottom: 1px gray dashed;">
                              <li class="li-label" style="margin-top: 10px;">
                                <%=h fr.user.name%>
                              </li>
                              <li class="li-field" style="text-align: right; margin-top: 5px;">
                                <%= link_to 'Borrar', fr, :confirm => '¿Está seguro?', :method => :delete %>
                                <a title="Borrar" href="#" onclick="if (confirm('¿Está seguro?')) { var f = document.createElement('form'); f.style.display = 'none'; this.parentNode.appendChild(f); f.method = 'POST'; f.action = '/privacy_friends/<%= fr.id %>';var m = document.createElement('input'); m.setAttribute('type', 'hidden'); m.setAttribute('name', '_method');m.setAttribute('value', 'delete'); f.appendChild(m); var at = document.createElement('input'); at.setAttribute('type', 'hidden'); at.setAttribute('name', 'authenticity_token'); at.setAttribute('value', '<%= form_authenticity_token %>'); f.appendChild(at); f.submit(); };return false;">
                                   <img src="/images/icon-delete.png" alt="Borrar" />
                                </a>
                              </li>
                            </ul>
                          </li>
                          <% end %>
                        </ol>
                      </div>

                        

                    </fieldset>

                </div> <!-- content_tb_content_content -->
              </div> <!-- content_tb_content_wrapper -->
